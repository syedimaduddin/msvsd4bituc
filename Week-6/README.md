## Index



## OpenFASoC Flow
For OpenFASoC flow go to openfasoc install directory ```~/openfasoc/openfasoc/generators ``` create a folder ```msvsd4bituc```.
<img src="./Images/msvsd4bituc_folder.png">


Inside the ```msvsd4bituc``` there are many files and folders.
<img src="./Images/folders_inside_msvsd4bituc.png">

Top level Makefile 

```bash
sky130hd_verilog:
	@@echo "=============================================================="
	@@echo " __ 	   __ ____ ____   _____ _     ___   ___ "
	@@echo " \ \      / /|  __|  _  \|_   _| |   / _ \ / __\ "
	@@echo "  \ \    / / | |_|| |_) |  | | | |  | | | | |  _ " 
	@@echo "   \ \__/ /  | |__|  __/  _| |_| |__| |_| | |_| | "
	@@echo "    \____/   |____|_|\_\ |_____|____|\___/ \___/ "
	@@echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
	@@echo "OpenFASoC For Verilog Generation"
	@@echo "==============================================================="
	python3 tools/msvsd4bituc-gen.py --specfile test.json --outputDir ./work --platform sky130hd --mode 
	
sky130hd_build:
	@python3 tools/msvsd4bituc-gen.py --specfile test.json --outputDir ./work --platform sky130hd --mode full 
	@python3 tools/parse_rpt.py
	@tools/verify_op.sh
	@@echo "Thank you for using OpenFASOC"
```

Go to ```/src/``` and place your dummy verilog code.
<img src="./Images/src_folder.png">

content of the ```/tools/``` Directory
<img src="./Images/tools_folder.png">

### Verilog Genertion
For our Simple design Verilog generation is just copying the verilog file 

```python
print("#----------------------------------------------------------------------")
print("# Verilog Generation")
print("#----------------------------------------------------------------------")

if args.platform == "sky130hd":
    aux1 = "ring_oscillator"
    aux2 = "adc_1bit"
elif args.platform == "sky130hs":
    aux1 = "ring_oscillator_hs"
    aux2 = "adc_1bit_hs"

shutil.copyfile(srcDir + "msvsd4bituc.v", flowDir + "design/src/msvsd4bituc/msvsd4bituc" + ".v")
shutil.copyfile(srcDir + "ring_oscillator.v", flowDir + "design/src/msvsd4bituc/ring_oscillator" + ".v")
shutil.copyfile(srcDir + "adc_1bit.v", flowDir + "design/src/msvsd4bituc/adc_1bit" + ".v")

print("#----------------------------------------------------------------------")
print("# Verilog Generated")
print("#----------------------------------------------------------------------")
print()
if args.mode == "verilog":
    print("Exiting tool....")
    exit()
```

### Synthesized Verilog Code
To create synthesized verilog run
```
make sky130hd_verilog
```

![image](https://user-images.githubusercontent.com/83899035/225960470-5adaa539-2e8a-47af-8978-7003f9021ab5.png)


openfasoc generates synthesized Verilog code for openroad flow

```verilog
/* Generated by Yosys 0.13+15 (git sha1 bc027b2ca, gcc 9.4.0-1ubuntu1~20.04.1 -fPIC -Os) */

module async_up_down(in_bias, in_inn, out_adc);
  input in_bias;
  input in_inn;
  output out_adc;
  wire ring_adc;
  COMPARATOR one_bit_adc (
    .BIAS(in_bias),
    .INN(in_inn),
    .INP(ring_adc),
    .OUT(out_adc)
  );
  RING_OSCILLATOR ring_osc (
    .INP(ring_adc)
  );
endmodule

```

### Config.mk file
![image](https://user-images.githubusercontent.com/83899035/225979912-0e63fae5-357c-4c1a-935b-14648d0a8c96.png)

``` bash
export DIE_AREA   	 	= 0 0 300 300
export CORE_AREA   		= 15 15 250 250

# area of the smaller voltage domain
export VD1_AREA                 = 50 50 100 150
```

### Run The Flow 
```
 make sky130hd_build
```
#### Run Synthesis and APR

![image](https://user-images.githubusercontent.com/83899035/225961844-f67544af-1b10-456d-a14c-07ff49d36957.png)

#### Floorplan
![image](https://user-images.githubusercontent.com/83899035/225962407-a77d721a-4df0-4891-9803-2d1e7a66a5ad.png)

Design area 436 u^2 1% utilization.

![image](https://user-images.githubusercontent.com/83899035/225962694-25af6d95-3d95-462f-aa65-5aba3b21f738.png)

#### Global Place 
Design area 2347 u^2 4% utilization.

![image](https://user-images.githubusercontent.com/83899035/225963464-4c2af781-d7a0-4e10-aa53-5e581699afde.png)

![image](https://user-images.githubusercontent.com/83899035/225964970-1c636cf9-00d8-4955-9c65-be4b5c5ee97c.png)


![image](https://user-images.githubusercontent.com/83899035/225969781-23c8405f-b69e-4b3d-8185-8bcbcafb16c0.png)

|ADC|RING_OSCILLATOR|
|-|-|
|![image](https://user-images.githubusercontent.com/83899035/225976915-8f87c496-0d49-49c7-a8db-3e55f9523844.png)| ![image](https://user-images.githubusercontent.com/83899035/225977082-3a924e0c-48ed-40ef-bfc3-4f96336208a0.png)|

### Global Route
![image](https://user-images.githubusercontent.com/83899035/225983889-60a150f9-ace6-4f68-8f2a-c222e6438502.png)

![image](https://user-images.githubusercontent.com/83899035/225985261-5bdc8186-c440-44fc-a838-d0e604a653bb.png)


![image](https://user-images.githubusercontent.com/83899035/225965920-d89b127b-0f2e-4ed0-ab81-2a4a32489004.png)





### Final layout 
![image](https://user-images.githubusercontent.com/83899035/225990221-50b684f7-0638-4aba-b59f-d8d36f357480.png)

### Connection
![image](https://user-images.githubusercontent.com/83899035/225990502-cc7b4534-649d-4263-b4c6-56a0d06c5678.png)


![image](https://user-images.githubusercontent.com/83899035/225992309-945719f4-745d-40f3-b44d-946fab25266d.png)


### Final Files

![image](https://user-images.githubusercontent.com/83899035/225990746-a78ca4f8-471a-495d-a5b3-3b2269cbe50d.png)


### Error
![image](https://user-images.githubusercontent.com/83899035/225995506-24a8ecce-f392-4b53-a9e5-d392e58edfd4.png)


![image](https://user-images.githubusercontent.com/83899035/225995191-6a76fdc6-1056-4311-80f8-80871cca4a79.png)


## Only The GDS File part is left.
I face this problem because the hierarchy of lef and gds file(ALIGN FLOW)

## OpenROAD

![image](https://user-images.githubusercontent.com/83899035/225997365-e96bb189-baf7-46bf-8dee-ca7d16c06174.png)




<!-- 
|.gds|.lef|
|-|-|
|| |

For view The Full Netlist HereðŸ‘‡
<details><summary>Netlist</summary>

```

```
</details>
<br> -->
