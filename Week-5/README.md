## Index
- [1-bit ADC (Analog to Digital Converter)](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#1-bit-adc-analog-to-digital-converter)
    * [ADC Schematic using Xschem](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#adc-schematic-using-xschem)
    * [Pre-Layout Simulation of 1-bit ADC](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#pre-layout-simulation-of-1-bit-adc)
    * [ADC Layout using ALIGN Tool](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#adc-layout-using-align-tool)
    * [Magic View ADC Layout generated from ALIGN](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#magic-view-adc-layout-generated-from-align)
    * [Post-layout Simulation of 1-bit ADC](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#post-layout-simulation-of-1-bit-adc)
    * [Result](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#result)
- [OpenFASoC Flow Verilog File](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#openfasoc-flow-verilog-file)
    * [Dummy Verilog For Top level](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#dummy-verilog-for-top-level)
    * [Verilog Code For ADC](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#verilog-code-for-adc)
    * [Verilog Code For analog_ring_osc](https://github.com/syedimaduddin/msvsd4bituc/tree/main/Week-5#verilog-code-for-analog_ring_osc)

## 1-bit ADC (Analog to Digital Converter)

### ADC Schematic using Xschem
<img src="./Images/adc_prelayout_schematic.png">

View the Netlist generated by xschem, Click HereðŸ‘‡
<details><summary>Netlist</summary>

```
** sch_path: /home/syedimaduddin/Desktop/VSD_PD_Research_Program/Week-5/xschem/adc_1bit.sch
**.subckt adc_1bit
XM1 net4 net2 VDD VDD sky130_fd_pr__pfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM2 out net4 VDD VDD sky130_fd_pr__pfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM3 net2 net2 VDD VDD sky130_fd_pr__pfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM4 net1 net1 VDD VDD sky130_fd_pr__pfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM5 net2 in1 net3 net3 sky130_fd_pr__nfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM6 net4 in2 net3 net3 sky130_fd_pr__nfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM7 net1 net1 GND GND sky130_fd_pr__nfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM8 net3 net1 GND GND sky130_fd_pr__nfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
XM9 out net1 GND GND sky130_fd_pr__nfet_01v8 L=0.15 W=1 nf=1 ad='int((nf+1)/2) * W/nf * 0.29' as='int((nf+2)/2) * W/nf * 0.29'
+ pd='2*int((nf+1)/2) * (W/nf + 0.29)' ps='2*int((nf+2)/2) * (W/nf + 0.29)' nrd='0.29 / W' nrs='0.29 / W'
+ sa=0 sb=0 sd=0 mult=1 m=1
Vdd VDD GND 1.8
.save i(vdd)
V1 in1 GND 1.2
.save i(v1)
V2 in2 GND sin(1.5 1.5 50meg 0.5n)
.save i(v2)
**** begin user architecture code
.lib /usr/local/share/pdk/sky130A/libs.tech/ngspice/sky130.lib.spice tt
.tran 4n 100n
.save all
**** end user architecture code
**.ends
.GLOBAL VDD
.GLOBAL GND
.end
```
</details>

#### Pre-Layout Simulation of 1-bit ADC
<img src="./Images/adc_prelayout_in_out_waveform.png">


### ADC Layout using ALIGN Tool
Netlist used for conversion from schematic to layout using ALIGN
```
.subckt adc in1 in2 out VDD GND
XM1 net4 net2 VDD VDD sky130_fd_pr__pfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM2 out net4 VDD VDD sky130_fd_pr__pfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM3 net2 net2 VDD VDD sky130_fd_pr__pfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM4 net1 net1 VDD VDD sky130_fd_pr__pfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM5 net2 in1 net3 net3 sky130_fd_pr__nfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM6 net4 in2 net3 net3 sky130_fd_pr__nfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM7 net1 net1 GND GND sky130_fd_pr__nfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM8 net3 net1 GND GND sky130_fd_pr__nfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
XM9 out net1 GND GND sky130_fd_pr__nfet_01v8 L=150e-09 W=10.5e-7 nf=2 m=1
.ends adc
```

#### Magic View ADC Layout generated from ALIGN
<!-- <img src="./Images/adc_postlayout_in_out_waveform.png"> -->


Extract the netlist of above ADC Layout from magic using the following commands

```
extract all
ext2spice cthresh 0 rthresh 0
ext2spice
```
View extracted Netlist from magic, Click HereðŸ‘‡
<details><summary>Netlist</summary>

```

```
</details>

<br>

#### Post-layout Simulation of 1-bit ADC
<img src="./Images/adc_postlayout_in_out_waveform.png">


#### Result 
Pre & Post layout Simulation matched.

<!--
### Lef & GDS File For OpenFASoC Flow
|.gds|.lef|
|-|-|
|![image](https://user-images.githubusercontent.com/83899035/224216719-054728c3-038a-40d7-9649-952bc65c8e2b.png)| ![image](https://user-images.githubusercontent.com/83899035/224216827-0857707d-5a4b-4c61-97ae-e539cfa937e8.png)|
-->

## OpenFASoC Flow Verilog File

### Dummy Verilog For Top level
```verilog
module analog_async_up_down(
    input in_ring,
    input in_bias,
    input in_inn,
    output out_adc
);

wire ring_adc;

analog_1bit_adc one_bit_adc(
    .in(in_ring),
    .out(ring_adc)
);

analog_ring_osc ring_osc(
    .in(ring_adc),
    .in(in_inn),
    .in(in_bias),
    .out(out_adc)
);

endmodule
```

#### Verilog Code For ADC
```verilog
module analog_1bit_adc(
    input in_bias,
    input in_inn,
    output out_adc
);

endmodule
```
#### Verilog Code For analog_ring_osc
```verilog
module analog_ring_osc(
    input in_ring,
    output ring_adc
);

endmodule
```
